<!DOCTYPE html>
<html lan g=" en ">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="assets/js/tailwind.js"></script>
    <script src="assets/js/jquery.js"></script>


</head>

<body>

    <div class=" p-12 gap-6 grid grid-cols-2">


        <div class="bg-gray-600 p-4 rounded shadow text-white">

            <table class="w-full">
                <thead>
                    <tr class="bg-gray-800 shadow-md  ">
                        <th class="p-2 ">#</th>
                        <th class="p-2 ">Name</th>
                        <th class="p-2 ">Qty</th>
                        <th class="p-2 ">Price</th>
                        <th class="p-2 ">Total</th>
                    </tr>
                </thead>

                <tbody id="tableBody">

                </tbody>
                <!-- <tr class="bg-gray-500 ">
                    <th class="p-2">1</th>
                    <th class="p-2">Biryani</th>
                    <th class="p-2">
                        <input type="number" class="border-2 p-1 bg-transparent" value="1" size="5" min="1" max="5">
                    </th>
                    <th class="p-2">200</th>
                    <th class="p-2">400</th>
                </tr> -->
            </table>

        </div>





        <div id="parentDiv" class="bg-gray-200 p-4  rounded shadow text-center grid grid-cols-3 gap-4">
            <!-- <div class="p-4 item cursor-pointer transform hover:scale-105 duration-500 rounded shadow bg-white">
                <img src="assets/images/biryani.jpg" class="rounded-md" alt="" srcset="">
                <div class="flex justify-between">
                    <h1 class="mt-4 text-xl font-bold" id="name">Biryani</h1>
                    <h1 class="mt-4 text-xl text-gray-400 font-bold" id="price" data-price="200">Rs.200</h1>

                </div>
            </div> -->




        </div>
    </div>


    <script>

        $(document).ready(async function () {

            var order_items = [];

            var items = [
                {
                    name: "Biryani",
                    price: 200,
                    image: "biryani.jpg",
                },
                {
                    name: "Karhai",
                    price: 400,
                    image: "karhai.jpg",
                },
                {
                    name: "Qorma",
                    price: 600,
                    image: "qorma.jpg",
                },
            ];


            //foreach on items

            await items.forEach(function (item) {

                var itemDiv = `
                <div class="p-4 item cursor-pointer transform hover:scale-105 duration-500 rounded shadow bg-white">
                <img src="assets/images/${item.image}" class="rounded-md" alt="" srcset="">
                <div class="flex justify-between">
                    <h1 class="mt-4 text-xl font-bold" id="name">${item.name}</h1>
                    <h1 class="mt-4 text-xl text-gray-400 font-bold" id="price" data-price="${item.price}">Rs.${item.price}</h1>

                </div>

            </div>
                `;

                $("#parentDiv").append(itemDiv);



            });




            $('.item').click(function () {


                var item_name = $(this).find('#name').text();
                var item_price = $(this).find('#price').data('price');


                //check if item already exists by name

                var item_exists = false;

                order_items.forEach(function (item) {

                    if (item.name === item_name) {
                        item_exists = true;
                    }

                });

                if (item_exists) {

                    order_items.forEach(function (item) {
                        if (item.name == item_name) {
                            item.qty++;
                            item.total = item.qty * item.price;
                            var currentItemSelected = $('#item_' + item_name);
                            currentItemSelected.children()[2].children[0].value = item.qty;
                            currentItemSelected.children()[4].innerHTML = "Rs." + item.total;
                        }
                    });





                } else {

                    itemObj = {
                        name: item_name,
                        price: item_price,
                        qty: 1,
                        total: item_price,
                    };

                    order_items.push(itemObj);

                    var tableBody = $("#tableBody");

                    var tableRow = `<tr class="bg-gray-500" id="item_${item_name}">
                        <th class="p-2">1</th>
                        <th class="p-2">${item_name}</th>
                        <th class="p-2">
                            <input type="number" class="border-2 p-1 bg-transparent" value="1" size="5" min="1" max="5">
                        </th>
                        <th class="p-2">Rs.${item_price}</th>
                        <th class="p-2">Rs.${item_price}</th>
                    </tr>`;

                    tableBody.append(tableRow);
                }

                console.log(order_items);


            });




        });
    </script>
</body>

</html>